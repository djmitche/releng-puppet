####  This file under configuration management control
####  DO NOT EDIT MANUALLY

<VirtualHost *:80>
    DocumentRoot /opt/bmm/www

    <Directory /opt/bmm/www/>
        Options None FollowSymLinks Indexes
        AllowOverride None
        Order Allow,Deny
        Allow from all
     </Directory>

     <Location />
         Order Allow,Deny
         Allow from all
     </Location>

     <Location /scripts>
         Order Allow,Deny
         Allow from all
     </Location>

     <Location /squashfs>
         Order Allow,Deny
         Allow from all
     </Location>

     # Serve /api from the frontend CGI, using mod_rewrite to make this work
     # for a CGI script

     RewriteEngine on
     RewriteRule ^(/api/.*)$ /frontend/index.cgi$1 [PT]
     <Location /frontend>
        SetEnv BMM_CONFIG <%= scope.lookupvar('::blackmobilemagic::settings::config_ini') %>
        SetHandler cgi-script
        Options +ExecCGI
     </Location>

</VirtualHost>

